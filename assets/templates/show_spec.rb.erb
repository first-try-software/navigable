require_relative '../../../domain/<%= @resource_name %>/show'

RSpec.describe <%= @resource_klass %>::Show do
  subject(:action) { described_class.new(params, listeners) }

  let(:params) { { id: 123 } }
  let(:listeners) { [] }

  describe '#execute' do
    subject(:execute) { action.execute }

    before do
      allow(<%= @resource_klass %>::Repository).to receive(:find).and_return(found_<%= @entity_name %>)
    end

    context 'when the <%= @entity_name %> is NOT found' do
      let(:found_<%= @entity_name %>) { nil }

      it 'returns a 404 response' do
        expect(execute).to have_attributes(status: 404)
      end
    end

    context 'when the <%= @entity_name %> is found' do
      let(:found_<%= @entity_name %>) { instance_double(<%= @entity_klass %>) }

      it 'returns a 200 response' do
        expect(execute).to have_attributes(status: 200)
      end
    end
  end
end